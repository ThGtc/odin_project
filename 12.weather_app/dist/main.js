(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{n:()=>o});let t=document.getElementById("weatherForecast");function n(e){document.getElementById("weatherOfTheDay").innerText="";let t=document.createElement("div");t.setAttribute("id",`day${o.forecastDate}`),document.getElementById("weatherOfTheDay").appendChild(t);let n=document.createElement("h3");n.setAttribute("id","forecastDate"),n.innerText="Aujourd'hui le "+o.forecastDate,document.getElementById(`day${o.forecastDate}`).appendChild(n);let i=document.createElement("div");i.setAttribute("id",`threeHrsForecast${e}`),document.getElementById(`day${o.forecastDate}`).appendChild(i);let s=document.createElement("p");s.setAttribute("id",`hourZone${e}`),s.innerText="En ce moment",document.getElementById(`threeHrsForecast${e}`).appendChild(s),r(e),d(e)}function i(e){if(null===document.getElementById(`day${o.forecastDate}`)){let e=document.createElement("div");e.setAttribute("id",`day${o.forecastDate}`),t.appendChild(e);let n=document.createElement("h3");n.setAttribute("id","forecastDate"),n.innerText=o.forecastDate+" (cacher ?)",document.getElementById(`day${o.forecastDate}`).appendChild(n)}let n=document.createElement("div");n.setAttribute("id",`threeHrsForecast${e}`),document.getElementById(`day${o.forecastDate}`).appendChild(n);let i=document.createElement("p");i.setAttribute("id",`hourZone${e}`),i.innerText=o.forecastHour,document.getElementById(`threeHrsForecast${e}`).appendChild(i),r(e),d(e)}function r(e){let t=document.createElement("div");t.setAttribute("id","tempZone"),document.getElementById(`threeHrsForecast${e}`).appendChild(t);let n=document.createElement("div");n.setAttribute("id","currentTemp"),n.innerText="Température prévue : "+o.temperature+"°C",t.appendChild(n);let i=document.createElement("div");i.setAttribute("id","feelsLike"),i.innerText="Température ressentie : "+o.feelsLike+"°C",t.appendChild(i);let r=document.createElement("div");r.setAttribute("id","minimalTemp"),r.innerText="Température minimale : "+o.minTemp+"°C",t.appendChild(r);let d=document.createElement("div");d.setAttribute("id","maximalTemp"),d.innerText="Température maximale : "+o.maxTemp+"°C",t.appendChild(d)}function d(e){let t=document.createElement("div");t.setAttribute("id","skyZone"),document.getElementById(`threeHrsForecast${e}`).appendChild(t);let n=document.createElement("img");n.setAttribute("id",`skyDescription${e}`),t.appendChild(n),function(e){switch(!0){case 500==o.weatherCode:document.getElementById(`skyDescription${e}`).src="../icons/500-fine_pluie.png",document.getElementById(`skyDescription${e}`).alt="Légère pluie",document.getElementById(`skyDescription${e}`).title="Légère pluie";break;case 800==o.weatherCode:"00:00:00"==document.getElementById(`hourZone${e}`).textContent||"03:00:00"==document.getElementById(`hourZone${e}`).textContent?(document.getElementById(`skyDescription${e}`).src="../icons/800-nuit_claire.png",document.getElementById(`skyDescription${e}`).alt="Nuit claire",document.getElementById(`skyDescription${e}`).title="Nuit claire"):(document.getElementById(`skyDescription${e}`).src="../icons/800-ensoleillé.png",document.getElementById(`skyDescription${e}`).alt="Ensoleillé",document.getElementById(`skyDescription${e}`).title="Ensoleillé");break;case 801==o.weatherCode:"00:00:00"==document.getElementById(`hourZone${e}`).textContent||"03:00:00"==document.getElementById(`hourZone${e}`).textContent?(document.getElementById(`skyDescription${e}`).src="../icons/801-qq_nuagesNIGHTMODE.png",document.getElementById(`skyDescription${e}`).alt="Quelques nuages",document.getElementById(`skyDescription${e}`).title="Quelques nuages"):(document.getElementById(`skyDescription${e}`).src="../icons/801-qq_nuages.png",document.getElementById(`skyDescription${e}`).alt="Quelques nuages",document.getElementById(`skyDescription${e}`).title="Quelques nuages");break;case 802==o.weatherCode||803==o.weatherCode||804==o.weatherCode:document.getElementById(`skyDescription${e}`).src="../icons/802-nuageux.png",document.getElementById(`skyDescription${e}`).alt="Nuageux",document.getElementById(`skyDescription${e}`).title="Nuageux"}}(e);let i=document.createElement("div");i.setAttribute("id","humidityPercentage"),i.innerText=o.humidity+"% d'humité",t.appendChild(i)}let o,s=document.getElementById("chevronsBtn");function l(){switch(!0){case"Dérouler les prévisions ?"==s.title:t.style.visibility="visible",t.style.height="auto",s.src="../icons/black_up_chevron.png",s.alt="Cacher les prévisions ?",s.title="Cacher les prévisions ?";break;case"Cacher les prévisions ?"==s.title:t.removeAttribute("style"),s.src="../icons/black_down_chevron.png",s.alt="Dérouler les prévisions ?",s.title="Dérouler les prévisions ?"}}s.addEventListener("click",l),document.getElementById("interTitle").addEventListener("click",l);class c{constructor(e,t,n,i,r,d,o,s,l){this.localisation=e,this.forecastDate=t,this.forecastHour=n,this.temperature=i,this.minTemp=r,this.maxTemp=d,this.feelsLike=o,this.weatherCode=s,this.humidity=l}}let a,m=[];async function u(e){document.getElementById("weatherOfTheDay").innerText="Loading, pls wait...";try{let t=await fetch(`http://api.openweathermap.org/data/2.5/forecast?q=${e}&APPID=8c007e215e766e43067cdb5b9684353d&units=metric&lang=FR`,{mode:"cors"}),r=await t.json();for(let e=0;e<r.list.length;e++)o=new c(r.city.name,r.list[e].dt_txt.slice(0,10),r.list[e].dt_txt.slice(11,19),r.list[e].main.temp,r.list[e].main.temp_min,r.list[e].main.temp_max,r.list[e].main.feels_like,r.list[e].weather[0].id,r.list[e].main.humidity),m.push(o),0==e?n(e):i(e);document.getElementById("citySelected").innerText="   "+o.localisation,document.getElementById("nextDays").style.visibility="visible",document.getElementById("interTitle").innerText="Pour les 5 prochains jours"}catch(e){document.getElementById("citySelected").innerText="",document.getElementById("nextDays").style.visibility="hidden",document.getElementById("weatherOfTheDay").innerText="Something went very wrong. Please get in touch with your space monkey to know what happened here.",console.error("oops, something went very wrong")}}const y=document.getElementById("changeLocalisation"),p=document.getElementById("searchLoc");y.addEventListener("submit",(()=>{event.preventDefault(),a=p.value,u(a),p.value="",document.getElementById("citySelected").innerText=" ",document.getElementById("weatherOfTheDay").innerText="Loading, pls wait...",document.getElementById("nextDays").style.visibility="hidden",document.getElementById("weatherForecast").innerHTML=""})),u("Paris")})();